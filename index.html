<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale=1">
    <title>Pomodoro by Jamdelion</title>
    <!-- <link href="style.css" rel="stylesheet"> -->
    <style>
        * {
          box-sizing: border-box;
          margin: 0;
        }
    
        body {
          font-family: system-ui, sans-serif;
          padding: 1.5rem;
          display: flex;
          flex-direction: column;
        }
      </style>
  </head>

  <body>
      <div class="timer">00:00</div>
      <button id="start">Start</button>
      <button id="stop">Stop</button>
      <button id="cancel">Cancel</button>



    <script>
        let countdown = document.querySelector(".timer");
        let timer = countdown.innerHTML;
        let start = document.getElementById("start");
        let stop = document.getElementById("stop");
        let cancel = document.getElementById("cancel");

        function initialiseTimer(timer, minutes) {
            let splitTimer = timer.split(":");
            // if minutes is a whole number
            if (minutes % 1 == 0) {
                splitTimer[0] = minutes;
            // otherwise use the minutes and turn the remainder into seconds 
            } else {
                splitTimer[0] = Math.floor(minutes);
                splitTimer[1] = Math.round((minutes % 1) * 60);
            }
            return splitTimer.join(":");
        }

        function decrementByOne(timer) {
            console.log("decrementing by one");
            let splitTimer = timer.split(":");
            // minutes = splitTimer[0]
            // seconds = splitTimer[1]
            splitTimer[0] = parseInt(splitTimer[0]);
            splitTimer[1] = parseInt(splitTimer[1]);
            if (splitTimer[1] > 0) {
                splitTimer[1]--;
                console.log(splitTimer[1]);
            } else {
                splitTimer[1] = 59;
                splitTimer[0]--;
            }
            // add new numbers to array and pad the zeros
            let newTimer = [];
            splitTimer.forEach((num) => {
                newTimer.push(padZeros(num));
            })
            return newTimer.join(":");
        }

        function padZeros(num) {
            return ("00" + num).slice(-2);
        }

        countdown.innerHTML = initialiseTimer(timer, 25);

        start.addEventListener("click", () => {
            setInterval(() => {
                countdown.innerHTML = decrementByOne(countdown.innerHTML);
            }, 1000)
        });


    </script>

  </body>
</html>


<!-- work timer counts to 0 from 25 minutes --> 
<!-- break timer that counts to 0 from 5 minutes -->
<!-- start/stop/cancel buttons -->

<!-- stretch: alarm sound -->
<!-- stretch: customisable time lengths -->